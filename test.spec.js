var library = require('./index.js');

var validator = new library.Validator();
var CreativeWorkProperties = [ 'http://schema.org/about',
              'http://schema.org/accountablePerson',
              'http://schema.org/alternativeHeadline',
              'http://schema.org/associatedMedia',
              'http://schema.org/audience',
              'http://schema.org/audio',
              'http://schema.org/author',
              'http://schema.org/comment',
              'http://schema.org/contentLocation',
              'http://schema.org/contentRating',
              'http://schema.org/contributor',
              'http://schema.org/copyrightHolder',
              'http://schema.org/copyrightYear',
              'http://schema.org/dateCreated',
              'http://schema.org/dateModified',
              'http://schema.org/datePublished',
              'http://schema.org/discussionUrl',
              'http://schema.org/editor',
              'http://schema.org/encoding',
              'http://schema.org/encodings',
              'http://schema.org/genre',
              'http://schema.org/headline',
              'http://schema.org/inLanguage',
              'http://schema.org/isFamilyFriendly',
              'http://schema.org/keywords',
              'http://schema.org/mentions',
              'http://schema.org/provider',
              'http://schema.org/publisher',
              'http://schema.org/publishingPrinciples',
              'http://schema.org/sourceOrganization',
              'http://schema.org/text',
              'http://schema.org/thumbnailUrl',
              'http://schema.org/version',
              'http://schema.org/video'],
aggregateRatingExpectedTypes = [ 'http://www.w3.org/2002/07/owl#Thing',
              'http://schema.org/Intangible',
              'http://schema.org/Rating',
              'http://schema.org/AggregateRating',
              'http://schema.org/Thing' ],
allProperties =['http://schema.org/associatedAnatomy',
'http://schema.org/about',
'http://schema.org/acceptedPaymentMethod',
'http://schema.org/acceptsReservations',
'http://schema.org/accountablePerson',
'http://schema.org/acquiredFrom',
'http://schema.org/action',
'http://schema.org/activeIngredient',
'http://schema.org/activityDuration',
'http://schema.org/activityFrequency',
'http://schema.org/actor',
'http://schema.org/associatedArticle',
'http://schema.org/associatedMedia',
'http://schema.org/associatedPathophysiology',
'http://schema.org/attendee',
'http://schema.org/actors',
'http://schema.org/attendees',
'http://schema.org/addOn',
'http://schema.org/additionalName',
'http://schema.org/audience',
'http://schema.org/additionalType',
'http://schema.org/audio',
'http://schema.org/author',
'http://schema.org/availability',
'http://schema.org/additionalVariable',
'http://schema.org/availabilityEnds',
'http://schema.org/address',
'http://schema.org/availabilityStarts',
'http://schema.org/addressCountry',
'http://schema.org/addressLocality',
'http://schema.org/availableAtOrFrom',
'http://schema.org/addressRegion',
'http://schema.org/administrationRoute',
'http://schema.org/availableDeliveryMethod',
'http://schema.org/advanceBookingRequirement',
'http://schema.org/availableIn',
'http://schema.org/availableService',
'http://schema.org/availableStrength',
'http://schema.org/availableTest',
'http://schema.org/award',
'http://schema.org/adverseOutcome',
'http://schema.org/awards',
'http://schema.org/affectedBy',
'http://schema.org/background',
'http://schema.org/baseSalary',
'http://schema.org/benefits',
'http://schema.org/bestRating',
'http://schema.org/billingIncrement',
'http://schema.org/biomechnicalClass',
'http://schema.org/birthDate',
'http://schema.org/bitrate',
'http://schema.org/blogPost',
'http://schema.org/blogPosts',
'http://schema.org/bloodSupply',
'http://schema.org/bodyLocation',
'http://schema.org/bookEdition',
'http://schema.org/bookFormat',
'http://schema.org/box',
'http://schema.org/branch',
'http://schema.org/branchOf',
'http://schema.org/brand',
'http://schema.org/breadcrumb',
'http://schema.org/breastfeedingWarning',
'http://schema.org/browserRequirements',
'http://schema.org/businessFunction',
'http://schema.org/byArtist',
'http://schema.org/calories',
'http://schema.org/caption',
'http://schema.org/carbohydrateContent',
'http://schema.org/carrierRequirements',
'http://schema.org/category',
'http://schema.org/cause',
'http://schema.org/causeOf',
'http://schema.org/children',
'http://schema.org/cholesterolContent',
'http://schema.org/circle',
'http://schema.org/citation',
'http://schema.org/clincalPharmacology',
'http://schema.org/closes',
'http://schema.org/code',
'http://schema.org/codeValue',
'http://schema.org/codingSystem',
'http://schema.org/colleague',
'http://schema.org/colleagues',
'http://schema.org/affiliation',
'http://schema.org/aggregateRating',
'http://schema.org/album',
'http://schema.org/albums',
'http://schema.org/alcoholWarning',
'http://schema.org/algorithm',
'http://schema.org/alternateName',
'http://schema.org/alternativeHeadline',
'http://schema.org/alumni',
'http://schema.org/alumniOf',
'http://schema.org/color',
'http://schema.org/amountOfThisGood',
'http://schema.org/antagonist',
'http://schema.org/comment',
'http://schema.org/commentText',
'http://schema.org/applicableLocation',
'http://schema.org/commentTime',
'http://schema.org/applicationCategory',
'http://schema.org/comprisedOf',
'http://schema.org/connectedTo',
'http://schema.org/contactPoint',
'http://schema.org/contactPoints',
'http://schema.org/contactType',
'http://schema.org/containedIn',
'http://schema.org/contentLocation',
'http://schema.org/contentRating',
'http://schema.org/applicationSubCategory',
'http://schema.org/contentSize',
'http://schema.org/applicationSuite',
'http://schema.org/contentUrl',
'http://schema.org/appliesToDeliveryMethod',
'http://schema.org/contraindication',
'http://schema.org/appliesToPaymentMethod',
'http://schema.org/contributor',
'http://schema.org/arterialBranch',
'http://schema.org/articleBody',
'http://schema.org/cookTime',
'http://schema.org/cookingMethod',
'http://schema.org/articleSection',
'http://schema.org/copyrightHolder',
'http://schema.org/aspect',
'http://schema.org/copyrightYear',
'http://schema.org/cost',
'http://schema.org/costCategory',
'http://schema.org/costCurrency',
'http://schema.org/costOrigin',
'http://schema.org/costPerUnit',
'http://schema.org/countriesNotSupported',
'http://schema.org/countriesSupported',
'http://schema.org/creator',
'http://schema.org/currenciesAccepted',
'http://schema.org/dateCreated',
'http://schema.org/dateModified',
'http://schema.org/datePosted',
'http://schema.org/datePublished',
'http://schema.org/dateline',
'http://schema.org/dayOfWeek',
'http://schema.org/deathDate',
'http://schema.org/deliveryLeadTime',
'http://schema.org/depth',
'http://schema.org/description',
'http://schema.org/device',
'http://schema.org/diagnosis',
'http://schema.org/diagram',
'http://schema.org/dietFeatures',
'http://schema.org/differentialDiagnosis',
'http://schema.org/director',
'http://schema.org/discusses',
'http://schema.org/discussionUrl',
'http://schema.org/distinguishingSign',
'http://schema.org/dosageForm',
'http://schema.org/doseSchedule',
'http://schema.org/doseUnit',
'http://schema.org/doseValue',
'http://schema.org/downloadUrl',
'http://schema.org/drainsTo',
'http://schema.org/drug',
'http://schema.org/drugClass',
'http://schema.org/drugUnit',
'http://schema.org/duns',
'http://schema.org/duplicateTherapy',
'http://schema.org/duration',
'http://schema.org/durationOfWarranty',
'http://schema.org/editor',
'http://schema.org/educationRequirements',
'http://schema.org/elevation',
'http://schema.org/eligibleCustomerType',
'http://schema.org/eligibleDuration',
'http://schema.org/eligibleQuantity',
'http://schema.org/eligibleRegion',
'http://schema.org/eligibleTransactionVolume',
'http://schema.org/email',
'http://schema.org/embedUrl',
'http://schema.org/employee',
'http://schema.org/employees',
'http://schema.org/employmentType',
'http://schema.org/encodesCreativeWork',
'http://schema.org/encoding',
'http://schema.org/encodingFormat',
'http://schema.org/encodings',
'http://schema.org/endDate',
'http://schema.org/endorsers',
'http://schema.org/epidemiology',
'http://schema.org/episode',
'http://schema.org/episodeNumber',
'http://schema.org/episodes',
'http://schema.org/equal',
'http://schema.org/estimatesRiskOf',
'http://schema.org/event',
'http://schema.org/events',
'http://schema.org/evidenceLevel',
'http://schema.org/evidenceOrigin',
'http://schema.org/exerciseType',
'http://schema.org/exifData',
'http://schema.org/expectedPrognosis',
'http://schema.org/experienceRequirements',
'http://schema.org/expertConsiderations',
'http://schema.org/expires',
'http://schema.org/familyName',
'http://schema.org/fatContent',
'http://schema.org/faxNumber',
'http://schema.org/featureList',
'http://schema.org/fiberContent',
'http://schema.org/fileFormat',
'http://schema.org/fileSize',
'http://schema.org/follows',
'http://schema.org/followup',
'http://schema.org/foodWarning',
'http://schema.org/founder',
'http://schema.org/founders',
'http://schema.org/foundingDate',
'http://schema.org/frequency',
'http://schema.org/function',
'http://schema.org/functionalClass',
'http://schema.org/gender',
'http://schema.org/genre',
'http://schema.org/geo',
'http://schema.org/givenName',
'http://schema.org/globalLocationNumber',
'http://schema.org/greater',
'http://schema.org/greaterOrEqual',
'http://schema.org/gtin13',
'http://schema.org/gtin14',
'http://schema.org/gtin8',
'http://schema.org/guideline',
'http://schema.org/guidelineDate',
'http://schema.org/guidelineSubject',
'http://schema.org/hasPOS',
'http://schema.org/headline',
'http://schema.org/height',
'http://schema.org/highPrice',
'http://schema.org/hiringOrganization',
'http://schema.org/homeLocation',
'http://schema.org/honorificPrefix',
'http://schema.org/honorificSuffix',
'http://schema.org/hospitalAffiliation',
'http://schema.org/howPerformed',
'http://schema.org/identifyingExam',
'http://schema.org/identifyingTest',
'http://schema.org/illustrator',
'http://schema.org/image',
'http://schema.org/imagingTechnique',
'http://schema.org/inAlbum',
'http://schema.org/inLanguage',
'http://schema.org/inPlaylist',
'http://schema.org/incentives',
'http://schema.org/includedRiskFactor',
'http://schema.org/includesObject',
'http://schema.org/increasesRiskOf',
'http://schema.org/indication',
'http://schema.org/industry',
'http://schema.org/infectiousAgent',
'http://schema.org/infectiousAgentClass',
'http://schema.org/ingredients',
'http://schema.org/insertion',
'http://schema.org/itemReviewed',
'http://schema.org/jobLocation',
'http://schema.org/jobTitle',
'http://schema.org/keywords',
'http://schema.org/knows',
'http://schema.org/labelDetails',
'http://schema.org/lastReviewed',
'http://schema.org/latitude',
'http://schema.org/legalName',
'http://schema.org/legalStatus',
'http://schema.org/lesser',
'http://schema.org/lesserOrEqual',
'http://schema.org/line',
'http://schema.org/location',
'http://schema.org/logo',
'http://schema.org/longitude',
'http://schema.org/lowPrice',
'http://schema.org/mainContentOfPage',
'http://schema.org/makesOffer',
'http://schema.org/manufacturer',
'http://schema.org/map',
'http://schema.org/maps',
'http://schema.org/maxPrice',
'http://schema.org/maxValue',
'http://schema.org/maximumIntake',
'http://schema.org/mechanismOfAction',
'http://schema.org/medicalSpecialty',
'http://schema.org/medicineSystem',
'http://schema.org/member',
'http://schema.org/memberOf',
'http://schema.org/members',
'http://schema.org/memoryRequirements',
'http://schema.org/mentions',
'http://schema.org/menu',
'http://schema.org/minPrice',
'http://schema.org/installUrl',
'http://schema.org/intensity',
'http://schema.org/interactingDrug',
'http://schema.org/interactionCount',
'http://schema.org/inventoryLevel',
'http://schema.org/isAccessoryOrSparePartFor',
'http://schema.org/isAvailableGenerically',
'http://schema.org/isConsumableFor',
'http://schema.org/isFamilyFriendly',
'http://schema.org/isPartOf',
'http://schema.org/isProprietary',
'http://schema.org/isRelatedTo',
'http://schema.org/isSimilarTo',
'http://schema.org/isVariantOf',
'http://schema.org/isbn',
'http://schema.org/minValue',
'http://schema.org/isicV4',
'http://schema.org/model',
'http://schema.org/itemCondition',
'http://schema.org/mpn',
'http://schema.org/itemListElement',
'http://schema.org/itemListOrder',
'http://schema.org/itemOffered',
'http://schema.org/musicBy',
'http://schema.org/musicGroupMember',
'http://schema.org/naics',
'http://schema.org/name',
'http://schema.org/nationality',
'http://schema.org/naturalProgression',
'http://schema.org/nerve',
'http://schema.org/nerveMotor',
'http://schema.org/nonEqual',
'http://schema.org/nonProprietaryName',
'http://schema.org/normalRange',
'http://schema.org/numTracks',
'http://schema.org/numberOfEpisodes',
'http://schema.org/numberOfPages',
'http://schema.org/nutrition',
'http://schema.org/occupationalCategory',
'http://schema.org/offerCount',
'http://schema.org/offers',
'http://schema.org/openingHours',
'http://schema.org/openingHoursSpecification',
'http://schema.org/opens',
'http://schema.org/operatingSystem',
'http://schema.org/origin',
'http://schema.org/originatesFrom',
'http://schema.org/outcome',
'http://schema.org/overdosage',
'http://schema.org/overview',
'http://schema.org/ownedFrom',
'http://schema.org/ownedThrough',
'http://schema.org/proteinContent',
'http://schema.org/owns',
'http://schema.org/provider',
'http://schema.org/parent',
'http://schema.org/parents',
'http://schema.org/partOfSeason',
'http://schema.org/publicationType',
'http://schema.org/publisher',
'http://schema.org/publishingPrinciples',
'http://schema.org/purpose',
'http://schema.org/partOfSystem',
'http://schema.org/qualifications',
'http://schema.org/partOfTVSeries',
'http://schema.org/ratingCount',
'http://schema.org/ratingValue',
'http://schema.org/pathophysiology',
'http://schema.org/recipeCategory',
'http://schema.org/recipeCuisine',
'http://schema.org/paymentAccepted',
'http://schema.org/recipeInstructions',
'http://schema.org/performer',
'http://schema.org/recipeYield',
'http://schema.org/recognizingAuthority',
'http://schema.org/recommendationStrength',
'http://schema.org/performerIn',
'http://schema.org/performers',
'http://schema.org/recommendedIntake',
'http://schema.org/regionDrained',
'http://schema.org/usesDevice',
'http://schema.org/usedToDiagnose',
'http://schema.org/validFrom',
'http://schema.org/permissions',
'http://schema.org/phase',
'http://schema.org/regionsAllowed',
'http://schema.org/photo',
'http://schema.org/validThrough',
'http://schema.org/relatedAnatomy',
'http://schema.org/photos',
'http://schema.org/relatedCondition',
'http://schema.org/value',
'http://schema.org/physiologicalBenefits',
'http://schema.org/valueAddedTaxIncluded',
'http://schema.org/relatedDrug',
'http://schema.org/playerType',
'http://schema.org/valueReference',
'http://schema.org/vatID',
'http://schema.org/relatedLink',
'http://schema.org/relatedStructure',
'http://schema.org/relatedTherapy',
'http://schema.org/polygon',
'http://schema.org/population',
'http://schema.org/relatedTo',
'http://schema.org/possibleComplication',
'http://schema.org/releaseDate',
'http://schema.org/possibleTreatment',
'http://schema.org/releaseNotes',
'http://schema.org/postOfficeBoxNumber',
'http://schema.org/relevantSpecialty',
'http://schema.org/postOp',
'http://schema.org/repetitions',
'http://schema.org/postalCode',
'http://schema.org/replyToUrl',
'http://schema.org/preOp',
'http://schema.org/representativeOfPage',
'http://schema.org/requirements',
'http://schema.org/version',
'http://schema.org/video',
'http://schema.org/requiresSubscription',
'http://schema.org/videoFrameSize',
'http://schema.org/videoQuality',
'http://schema.org/responsibilities',
'http://schema.org/restPeriods',
'http://schema.org/warning',
'http://schema.org/review',
'http://schema.org/predecessorOf',
'http://schema.org/warranty',
'http://schema.org/pregnancyCategory',
'http://schema.org/pregnancyWarning',
'http://schema.org/reviewBody',
'http://schema.org/warrantyScope',
'http://schema.org/prepTime',
'http://schema.org/reviewCount',
'http://schema.org/weight',
'http://schema.org/preparation',
'http://schema.org/reviewRating',
'http://schema.org/prescribingInfo',
'http://schema.org/width',
'http://schema.org/reviewedBy',
'http://schema.org/prescriptionStatus',
'http://schema.org/price',
'http://schema.org/reviews',
'http://schema.org/priceCurrency',
'http://schema.org/riskFactor',
'http://schema.org/risks',
'http://schema.org/priceRange',
'http://schema.org/runsTo',
'http://schema.org/priceSpecification',
'http://schema.org/safetyConsideration',
'http://schema.org/priceType',
'http://schema.org/salaryCurrency',
'http://schema.org/saturatedFatContent',
'http://schema.org/wordCount',
'http://schema.org/screenshot',
'http://schema.org/workHours',
'http://schema.org/workLocation',
'http://schema.org/season',
'http://schema.org/seasonNumber',
'http://schema.org/workload',
'http://schema.org/seasons',
'http://schema.org/worksFor',
'http://schema.org/secondaryPrevention',
'http://schema.org/worstRating',
'http://schema.org/seeks',
'http://schema.org/priceValidUntil',
'http://schema.org/seller',
'http://schema.org/primaryImageOfPage',
'http://schema.org/primaryPrevention',
'http://schema.org/printColumn',
'http://schema.org/sensoryUnit',
'http://schema.org/printEdition',
'http://schema.org/printPage',
'http://schema.org/serialNumber',
'http://schema.org/printSection',
'http://schema.org/procedure',
'http://schema.org/procedureType',
'http://schema.org/seriousAdverseOutcome',
'http://schema.org/processorRequirements',
'http://schema.org/producer',
'http://schema.org/servesCuisine',
'http://schema.org/servingSize',
'http://schema.org/productID',
'http://schema.org/sibling',
'http://schema.org/productionCompany',
'http://schema.org/siblings',
'http://schema.org/signDetected',
'http://schema.org/proprietaryName',
'http://schema.org/signOrSymptom',
'http://schema.org/significance',
'http://schema.org/significantLink',
'http://schema.org/significantLinks',
'http://schema.org/skills',
'http://schema.org/sku',
'http://schema.org/sodiumContent',
'http://schema.org/softwareVersion',
'http://schema.org/source',
'http://schema.org/sourceOrganization',
'http://schema.org/sourcedFrom',
'http://schema.org/specialCommitments',
'http://schema.org/specialty',
'http://schema.org/sponsor',
'http://schema.org/spouse',
'http://schema.org/stage',
'http://schema.org/stageAsNumber',
'http://schema.org/startDate',
'http://schema.org/status',
'http://schema.org/storageRequirements',
'http://schema.org/streetAddress',
'http://schema.org/strengthUnit',
'http://schema.org/strengthValue',
'http://schema.org/structuralClass',
'http://schema.org/study',
'http://schema.org/studyDesign',
'http://schema.org/studyLocation',
'http://schema.org/studySubject',
'http://schema.org/subEvent',
'http://schema.org/subEvents',
'http://schema.org/subStageSuffix',
'http://schema.org/subStructure',
'http://schema.org/subTest',
'http://schema.org/subtype',
'http://schema.org/successorOf',
'http://schema.org/sugarContent',
'http://schema.org/superEvent',
'http://schema.org/supplyTo',
'http://schema.org/targetPopulation',
'http://schema.org/taxID',
'http://schema.org/telephone',
'http://schema.org/text',
'http://schema.org/thumbnail',
'http://schema.org/thumbnailUrl',
'http://schema.org/tickerSymbol',
'http://schema.org/tissueSample',
'http://schema.org/title',
'http://schema.org/totalTime',
'http://schema.org/track',
'http://schema.org/tracks',
'http://schema.org/trailer',
'http://schema.org/transFatContent',
'http://schema.org/transcript',
'http://schema.org/transmissionMethod',
'http://schema.org/trialDesign',
'http://schema.org/tributary',
'http://schema.org/typeOfGood',
'http://schema.org/typicalTest',
'http://schema.org/unitCode',
'http://schema.org/unsaturatedFatContent',
'http://schema.org/uploadDate',
'http://schema.org/url'
];
              
validator.endpoint = 'http://127.0.0.1:5822/';
validator.username = 'admin';
validator.password = 'admin';
validator.database = 'schema';
validator.configureConnection();

describe ("getProperties", function () {
    it("returns the complete set of properties", function (done) {
        validator.getProperties('CreativeWork', function (err, results){
            expect(results.length).toEqual(CreativeWorkProperties.length);
            for (var result = 0; result < results.length; result ++)
            {
                expect(CreativeWorkProperties.indexOf(results[result])).not.toEqual (-1);
            }
            done();
        });
    });
});

describe("checkIsValidProperty", function () {
   it("correctly identifies a valid property", function (done){
       validator.checkIsValidProperty('CreativeWork', 'about', function(err,result) {
           expect(result).toBe(true);
           done();
        }); 
    });
    
    it("correctly identifies an invalid property", function (done){
       validator.checkIsValidProperty('CreativeWork', 'PostalWhatever', function(err, result){
            expect(result).toBe(false);
            done();
       }); 
    }); 
});

describe('checkIsExpectedType', function (){
    it('correctly identifies when a property type matches', function (done){
        validator.checkIsExpectedType('aggregateRating', 'Rating', function (err, result){
            expect(result).toBe(true);
            done();
        });
    }); 
    
    it('correctly identifies when a property type does not match', function (done){
        validator.checkIsExpectedType('aggregateRating', 'Person', function (err, result){
            expect(result).toBe(false);
            done();
        });
    }); 
});

describe('getExpectedTypes', function () {
    it('Returns the correct list of expected types', function (done){
       validator.getExpectedTypes('aggregateRating', function (err, result){
            expect(result.length).toBe(aggregateRatingExpectedTypes.length);
            for (var eachResult = 0; eachResult < result.length; eachResult ++)
                expect(aggregateRatingExpectedTypes.indexOf(result[eachResult])).not.toEqual(-1);
            done();
       }); 
    });
});

describe('checkIsValidTypeInSchema', function (){
    it('correctly identifies when a type matches', function (done){
        validator.checkIsValidTypeInSchema('http://schema.org/Person', function (err, result){
            expect(result).toBe(true);
            done();
        });
    }); 
    
    it('correctly identifies when a type does not match', function (done){
        validator.checkIsValidTypeInSchema('http://schema.org/Persaaaan', function (err, result){
            expect(result).toBe(false);
            done();
        });
    }); 
});

describe('checkIsValidPropertyInSchema', function (){
    it('correctly identifies when a property matches', function (done){
        validator.checkIsValidPropertyInSchema('http://schema.org/name', function (err, result){
            expect(result).toBe(true);
            done();
        });
    }); 
    
    it('correctly identifies when a type does not match', function (done){
        validator.checkIsValidPropertyInSchema('http://schema.org/nameee', function (err, result){
            expect(result).toBe(false);
            done();
        });
    }); 
});


describe('getAllProperties', function () {
    it('Returns the correct list of all properties', function (done){
       validator.getAllProperties(function (err, result){
            expect(result.length).toBe(allProperties.length);
            for (var eachResult = 0; eachResult < result.length; eachResult ++)
                expect(allProperties.indexOf(result[eachResult])).not.toEqual(-1);
            done();
       }); 
    });
});